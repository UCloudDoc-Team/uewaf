# # 常见问题

### 如何获取访问网站客户的原始IP
UWAF会请求头中通过 X-Real-IP 和 X-Forwarded-For 两个字段来传递来访用户的真实IP，请在源站服务器中配置并获取它们的值。

在Web应用程序中，可以通过下面的方法来获取：

``` html
  –ASP
  Request.ServerVariables(“X-Real-IP”)
  –PHP
  $_SERVER[“X-Real-IP”]
  –JSP
  request.getHeader(“X-Real-IP”)
```

?> 备注：如果上层链路为CDN等第三方代理，有可能无法获取真实IP。

### 最新的高危漏洞出现UWAF是否会支持防护
每当爆出最新漏洞的时候，我们的运营人员会第一时间跟进，分析POC和漏洞原理，提取相应的检测规则，及时部署新规则到UWAF系统。

### UWAF支持虚拟补丁，什么是虚拟补丁？
UWAF系统对漏洞攻击的阻断称为“虚拟补丁”，意味着并非是真正的打补丁行为，而是临时封堵攻击，为业务方更新补丁赢取时间。

### 如果我们有ULB负载网关，是否就直接填写负载网关的IP还是填写子网主机IP
如果有ULB网关，则填写网关的IP即可，无需子网主机IP。

### 如何获取CDN的真实IP？
默认CDN会通过XFF来传递客户的真实IP，但是不排除用户伪造请求IP的情况出现。
以UCDN举例，如果想要用真实的IP进行信息判断，需要做如下操作

1. 在WEB应用防火墙  --->  域名管理，选中需要设置的域名，点击编辑
2. 打开后，开启获取真实IP设置，在真实IP字段填入 X-Real-IP 字段（该字段为UCDN传递真实IP客户，如选择其他第三方代理，请与其供应商确认真实IP字段）
    ![](/images/15971363045098.jpg)

4. 配置完成后，点击确定，即可完成获取真实IP操作



# 使用注意事项
  - 域名必须是已备案的
  - 切换DNS大概需要10分钟生效
  - 支持续费、自动续费、变更计费方式、升级（比如高级版改为企业版）、关闭退费
  - UWAF支持添加非UCloud机房的域名，可以任选某可用区添加。目前支持多地域可用区使用UWAF（各可用区版本在使用当中无功能上或性能上的区别，仅仅是配置部署的机房位置不同）
  - 暂不支持版本的降级操作，从配额管理购买的附加资源，如需单独删除，需联系技术人员



