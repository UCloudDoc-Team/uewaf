# API概述

API安全模块是UWAF（Web Application Firewall，简称WAF）独立的产品模块。该模块基于内置检测机制和自定义检测策略，自动梳理已接入防护的业务的API资产，检测API风险（例如未授权访问、敏感数据过度暴露、内部接口泄露等），通过报表还原API异常事件，审查和溯源敏感数据泄露事件，为您提供详细的风险处理建议和API生命周期管理参考数据，帮助您发现和管理业务中存在的全量API接口资产，提升API接口在数据流转过程中的安全性。本文介绍如何进行使用API安全功能进行防护。

## 什么是API安全

对于企业服务而言，提供海量的API服务和数据增值服务已成为一项重要工作。然而，随着API的快速发展，面临的风险也在增加。攻击者可能在未授权的情况下获取API接口的访问权限，错误配置或非法的API访问请求可能导致敏感数据泄漏。因此，Web应用防火墙（WAF）通过API监测和流量可视化，能够自动发现和归类API业务，形成正常的访问请求模型。一旦发现异常API访问，WAF结合其处置能力，可以形成有效的安全闭环。

## 核心价值

API安全提供了自动化的API接口识别、接口风险检测及异常攻击检测能力，可以帮助您发现和解决以下几种核心需求：

- 检测发现全量API资产。支持自定义检测策略，方便您的安全团队需要掌握业务所有的API，以便进行相应的安全管理。
- 检测发现API存在的安全风险，比如未授权访问、弱口令、接口设计的不安全不规范。
- 检测发现针对API接口的攻击行为，比如窃取敏感数据、爬取接口数据、账号爆破、撞库、短信轰炸等接口滥用行为，辅助您对可能造成业务损失的攻击及时处理。

## API安全功能介绍

API安全模块基于内置检测机制和客户自定义检测策略，针对已接入WAF的业务流量，识别其中存在的API接口，分析API接口存在的各类安全风险，检测API在实际应用过程中存在的各类异常调用或攻击行为，监测敏感流转、溯源敏感数据泄露事件，帮助您实现全面的API资产管理和安全检测及防护能力。API安全除概览页签外主要包含四个功能大类：资产管理、风险事件、日志查询以及策略配置。

- 资产管理模块支持资产信息的查询、统计和管理。
- 风险事件模块支持风险检测、安全事件和整体概览维度的数据查询统计。
- 日志查询模块支持根据API资产、风险事件等维度查询详细的请求记录。
- 策略配置支持您在风险检测、安全事件、敏感数据、鉴权凭据、业务用途、生命周期管理、生效对象、日志订阅等方面配置相关的策略。

四个功能大类中具体包含了以下六个的功能页签。

| 页面标签 | 功能介绍                                                     |
| -------- | ------------------------------------------------------------ |
| 概览     | 包含API资产总数、Top5域名访问趋势统计、活跃API、API类型Top5访问趋势统计等。 |
| 资产管理 | API安全通过离线分析业务访问日志，自动检测流量中存在的所有API，并支持根据接口特征，自动识别API业务用途。 |
| 风险事件 | 监控分析API的调用行为，及时发现各类异常访问或攻击行为。      |
| 日志查询 | 根据API资产、风险事件等维度查询详细的请求记录。              |
| 策略配置 | 在内置检测机制的基础上，API安全支持自定义符合业务特征的检测策略，使得识别出的API资产更符合实际业务情况，进一步提高API安全检测的准确率与召回率。支持防护对象级别开启API安全，灵活控制API安全的生效对象。 |
| 信息维护 | 创建分组，可以根据API的业务用途进行分组，以便更好地管理和组织。 |

## 开通API安全服务

> <p style="color: red;">重要:</p>
>
> <p style="color: red;">API安全所有的计算和分析均离线完成，不会主动探测接口，不会对业务运行产生任何影响。</p>
>
> <p style="color: red;">API安全会检测符合指定特征的请求响应的内容，用于判断API是否存在数据泄露风险。开通API安全，就意味着授权WAF进行相关分析。开通前，请根据实际业务进行评估。
>
> 

### 新购UWAF

​	在开通UWAF时选择完UWAF的地域和版本后，根据需要选择API安全域名包数量即可，如下图：

![](/images/api-security/buy-apisec.png)



### 已开通UWAF

​	在UWAF控制台---概览---配额管理页面根据需要选择API安全域名包数量，如下图：

![](/images/api-security/ext-apsec.png)

> ULB版本WAF不支持API 安全功能。
>
> 一个API安全域名包支持对十个域名开启API安全功能。
